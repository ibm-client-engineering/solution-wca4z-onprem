"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[9193],{8507:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var i=t(5893),o=t(1151);const r={title:"Lessons Learned",description:"Troubleshooting issues and tips",custom_edit_url:null},s="Lessons Learned",a={id:"Takeaways/lessons-learned",title:"Lessons Learned",description:"Troubleshooting issues and tips",source:"@site/docs/04-Takeaways/lessons-learned.mdx",sourceDirName:"04-Takeaways",slug:"/Takeaways/lessons-learned",permalink:"/solution-wca4z-onprem/Takeaways/lessons-learned",draft:!1,unlisted:!1,editUrl:null,tags:[],version:"current",frontMatter:{title:"Lessons Learned",description:"Troubleshooting issues and tips",custom_edit_url:null},sidebar:"tutorialSidebar",previous:{title:"Transform",permalink:"/solution-wca4z-onprem/Use Cases/transform"},next:{title:"References",permalink:"/solution-wca4z-onprem/Resources/references"}},l={},d=[{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Configuration Service in \u201cStopping\u201d",id:"configuration-service-in-stopping",level:3},{value:"Symptom: ADDI Configuration service stuck in \u201cStopping\u201d state.",id:"symptom-addi-configuration-service-stuck-in-stopping-state",level:4},{value:"Refactoring Assistant can\u2019t load artifacts because connection to SQL Server fails",id:"refactoring-assistant-cant-load-artifacts-because-connection-to-sql-server-fails",level:3},{value:"Symptom: Artifacts in RA fail to load and Test connection fails for the SQL Server when entering the 9.x.x.x IP address in IBM Application Discovery -&gt; Configure -&gt; servers and security -&gt; Relational database server",id:"symptom-artifacts-in-ra-fail-to-load-and-test-connection-fails-for-the-sql-server-when-entering-the-9xxx-ip-address-in-ibm-application-discovery---configure---servers-and-security---relational-database-server",level:4},{value:"Failing to initialize the orient DB container",id:"failing-to-initialize-the-orient-db-container",level:3},{value:"Symptom: OrientDB error statements appear during RA start up",id:"symptom-orientdb-error-statements-appear-during-ra-start-up",level:4},{value:"Other \u201cHow Tos\u201d",id:"other-how-tos",level:2},{value:"How-to get your SQL Server IP address and port",id:"how-to-get-your-sql-server-ip-address-and-port",level:3},{value:"Re-installing Refactoring Assistant",id:"re-installing-refactoring-assistant",level:3},{value:"BetaNXT Project",id:"betanxt-project",level:2},{value:"DEX_HOST_PORT",id:"dex_host_port",level:3},{value:"<strong>Problem</strong>",id:"problem",level:4},{value:"<strong>Solution</strong>",id:"solution",level:4},{value:"Configuring IBM Application Discovery",id:"configuring-ibm-application-discovery",level:3},{value:"Getting the FQDN to correctly populate the AD_HOST_PORT",id:"getting-the-fqdn-to-correctly-populate-the-ad_host_port",level:3},{value:"<strong>Problem</strong>",id:"problem-1",level:4},{value:"<strong>Solution</strong>",id:"solution-1",level:4},{value:"Provisioning Watson Code Assistant",id:"provisioning-watson-code-assistant",level:3},{value:"<strong>Problem</strong>",id:"problem-2",level:4},{value:"<strong>Solution</strong>",id:"solution-2",level:4},{value:"First install didn&#39;t include the Occurrences per file properly",id:"first-install-didnt-include-the-occurrences-per-file-properly",level:3},{value:"Make sure the refactoring assistant is loading properly",id:"make-sure-the-refactoring-assistant-is-loading-properly",level:3},{value:"<strong>Problem</strong>",id:"problem-3",level:4},{value:"VM Problems",id:"vm-problems",level:3},{value:"Installing ADDI",id:"installing-addi",level:3},{value:"Installing Refactoring Assistant",id:"installing-refactoring-assistant",level:3}];function c(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h1,{id:"lessons-learned",children:"Lessons Learned"}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.h3,{id:"configuration-service-in-stopping",children:"Configuration Service in \u201cStopping\u201d"}),"\n",(0,i.jsx)(n.h4,{id:"symptom-addi-configuration-service-stuck-in-stopping-state",children:"Symptom: ADDI Configuration service stuck in \u201cStopping\u201d state."}),"\n",(0,i.jsxs)(n.p,{children:["Resolution:\nUse the Task Manager to kill the Java process that has the Command line ",(0,i.jsx)(n.code,{children:"\u201cjava -Xmx512M -Djava.library.path=lib/win -cp jar\\server-3.1.1.jar;jar\\com-ez.ssdp-2.0.0.jar;jar\\snappy-java-1.1.8.2.jar;\u2026\u201d"})]}),"\n",(0,i.jsx)(n.p,{children:"After that you can refresh the state of the Configuration service in the ADDI dashboard and restart it."}),"\n",(0,i.jsx)(n.h3,{id:"refactoring-assistant-cant-load-artifacts-because-connection-to-sql-server-fails",children:"Refactoring Assistant can\u2019t load artifacts because connection to SQL Server fails"}),"\n",(0,i.jsx)(n.h4,{id:"symptom-artifacts-in-ra-fail-to-load-and-test-connection-fails-for-the-sql-server-when-entering-the-9xxx-ip-address-in-ibm-application-discovery---configure---servers-and-security---relational-database-server",children:"Symptom: Artifacts in RA fail to load and Test connection fails for the SQL Server when entering the 9.x.x.x IP address in IBM Application Discovery -> Configure -> servers and security -> Relational database server"}),"\n",(0,i.jsx)(n.p,{children:"Resolution:\nThe problem is that the server was only bound to the 127.0.0.1 address.\nTo change that,"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["From the Start menu, search for ",(0,i.jsx)(n.code,{children:"Configuration Manager"})," and open the SQL Server\nConfiguration Manager"]}),"\n",(0,i.jsxs)(n.li,{children:["In the left sidebar, select ",(0,i.jsx)(n.code,{children:"SQL Server Network Configuration"})," -> ",(0,i.jsx)(n.code,{children:"Protocols for MSSQLSERVER"})," , then double click on ",(0,i.jsx)(n.code,{children:"TCP/IP"})]}),"\n",(0,i.jsx)(n.li,{children:"In the dialog that opened, go to the IP Addresses tab"}),"\n",(0,i.jsxs)(n.li,{children:["Find the section that has the 9.x.x.x IP address of your Windows VM and set\n",(0,i.jsx)(n.code,{children:"Enabled"})," to ",(0,i.jsx)(n.code,{children:"yes"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Click ",(0,i.jsx)(n.code,{children:"Ok"})," to save the changes and also click ",(0,i.jsx)(n.code,{children:"Ok"})," on the dialog that warns you that a\nrestart is necessary."]}),"\n",(0,i.jsxs)(n.li,{children:["To perform the restart,","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["in the left sidebar of the ",(0,i.jsx)(n.code,{children:"SQL Server Configuration Manager"}),", select ",(0,i.jsx)(n.code,{children:"SQL Server Services"})]}),"\n",(0,i.jsxs)(n.li,{children:["Right click on ",(0,i.jsx)(n.code,{children:"SQL Server (MSSQLSERVER)"})," and select ",(0,i.jsx)(n.code,{children:"Restart"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.admonition,{type:"tip",children:(0,i.jsx)(n.p,{children:"If you are still getting errors create an inbound rule for your SQL server port (default 1433) in \u201cWindows Defender Firewall with Advanced Security\u201d"})}),"\n",(0,i.jsx)(n.h3,{id:"failing-to-initialize-the-orient-db-container",children:"Failing to initialize the orient DB container"}),"\n",(0,i.jsx)(n.h4,{id:"symptom-orientdb-error-statements-appear-during-ra-start-up",children:"Symptom: OrientDB error statements appear during RA start up"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-java",children:"Loaded messages from i18n/en.properties\nGenerating certificate signing request\nGenerating a RSA private key\n..............................+++++\n..................+++++\nwriting new private key to 'orientdb.key'\n-----\nGenerating signed certificate\nSignature ok\nsubject=CN = orientdb, O = IBM\nGetting CA Private Key\n=======================================================================================================================\nWhat is the OrientDB password? This password will be required every time Refactoring Assistant for IBM z/OS is started.\n=======================================================================================================================\nPassword: \nStarting OrientDB...\n\u2714 docker.io/library/orientdb:3.2.18\nTrying to pull docker.io/library/orientdb:3.2.18...\nWARN[0032] Failed, retrying in 1s ... (1/3). Error: initializing source docker://orientdb:3.2.18: reading manifest 3.2.18 in docker.io/library/orientdb: toomanyrequests: You have reached your pull rate limit. You may increase the limit by authenticating and upgrading: https://www.docker.com/increase-rate-limit \n\n\nWARN[0064] Failed, retrying in 1s ... (2/3). Error: initializing source docker://orientdb:3.2.18: reading manifest 3.2.18 in docker.io/library/orientdb: toomanyrequests: You have reached your pull rate limit. You may increase the limit by authenticating and upgrading: https://www.docker.com/increase-rate-limit\n"})}),"\n",(0,i.jsx)(n.p,{children:"Try using the following commands in your Linux env:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"podman login docker-eu.artifactory.swg-devops.com\npodman pull docker-eu.artifactory.swg-devops.com/sys-nazare-cicd-team-wca4z-private-docker-local/orientdb:3.2.18\n"})}),"\n",(0,i.jsx)(n.p,{children:"Commands above will need your API Key, see How-to get your artifactory API key"}),"\n",(0,i.jsx)(n.p,{children:"Then try again"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"./start.sh\n"})}),"\n",(0,i.jsx)(n.h2,{id:"other-how-tos",children:"Other \u201cHow Tos\u201d"}),"\n",(0,i.jsx)(n.h3,{id:"how-to-get-your-sql-server-ip-address-and-port",children:"How-to get your SQL Server IP address and port"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"In your SQL Server Configuration Manager"}),"\n",(0,i.jsx)(n.li,{children:"In the left pane, expand \u201cSQL Server Network Configuration\u201d"}),"\n",(0,i.jsx)(n.li,{children:"Select \u201cProtocols for MSSQLSERVER\u201d"}),"\n",(0,i.jsx)(n.li,{children:"In the right pane, right click \u201cTCP/IP\u201d and select \u201cProperties\u201d"}),"\n",(0,i.jsx)(n.li,{children:"Select the IP Addresses tab"}),"\n",(0,i.jsx)(n.li,{children:"Take note of your IP 9.x and TCP port"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"re-installing-refactoring-assistant",children:"Re-installing Refactoring Assistant"}),"\n",(0,i.jsx)(n.p,{children:"If you already have RA installed but want to reinstall it:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Go to the directory where you installed Refactoring Assistant (e.g., /root/refactoring-assistant)."}),"\n",(0,i.jsx)(n.li,{children:"Run ./stop.sh all to stop all containers"}),"\n",(0,i.jsxs)(n.li,{children:["Delete the current podman images except for the orientdb image","\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"See all images: podman images"}),"\n",(0,i.jsxs)(n.li,{children:["Delete them one by one: podman rmi <image id> Then follow the instructions to install and configure RA","\n",(0,i.jsx)(n.admonition,{type:"note",children:(0,i.jsx)(n.p,{children:"You don\u2019t need to do the \u201cAdditional sections using HTTPS\u201d again"})}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"betanxt-project",children:"BetaNXT Project"}),"\n",(0,i.jsx)(n.p,{children:"We did an install for BetaNXT of ADDI and Refactoring Assistant for a WCA4Z project. This is a overview of the issues we encountered and the solutions we came up with. We also propose improvements to the existing documentation to avoid these issues in the future."}),"\n",(0,i.jsx)(n.h3,{id:"dex_host_port",children:"DEX_HOST_PORT"}),"\n",(0,i.jsx)(n.h4,{id:"problem",children:(0,i.jsx)(n.strong,{children:"Problem"})}),"\n",(0,i.jsxs)(n.p,{children:["The documentation calls to set the variable ",(0,i.jsx)(n.code,{children:"DEX_HOST_PORT"})," to use ",(0,i.jsx)(n.code,{children:"https"})," however in the slack support channel, people are saying to leave it blank. We could not get it to work when we set it to ",(0,i.jsx)(n.code,{children:"https"})," but leaving it blank it worked."]}),"\n",(0,i.jsx)(n.h4,{id:"solution",children:(0,i.jsx)(n.strong,{children:"Solution"})}),"\n",(0,i.jsxs)(n.p,{children:["Leave the ",(0,i.jsx)(n.code,{children:"DEX_HOST_PORT"})," blank"]}),"\n",(0,i.jsx)(n.h3,{id:"configuring-ibm-application-discovery",children:"Configuring IBM Application Discovery"}),"\n",(0,i.jsx)(n.p,{children:"We need to be using the fully qualified domain name. We had tried to use the IP address, but we were getting errors so we went back to replace the ip address with the domain name.\nThis required us to restart the services"}),"\n",(0,i.jsx)(n.h3,{id:"getting-the-fqdn-to-correctly-populate-the-ad_host_port",children:"Getting the FQDN to correctly populate the AD_HOST_PORT"}),"\n",(0,i.jsx)(n.h4,{id:"problem-1",children:(0,i.jsx)(n.strong,{children:"Problem"})}),"\n",(0,i.jsx)(n.p,{children:"We were running into issues because we were using the static IP addresses for the VMs to populate the AD_HOST_PORT environment variable. The documentation states to use the domain name, but we figured they were interchangeable. They are not. So we needed to figure out how to find the hostnames of the respective machines"}),"\n",(0,i.jsx)(n.h4,{id:"solution-1",children:(0,i.jsx)(n.strong,{children:"Solution"})}),"\n",(0,i.jsxs)(n.p,{children:["In the linux machine we used the command ",(0,i.jsx)(n.code,{children:"hostnamectl"})," to pull up the domain name\nIn the windows machine we used the GUI and went into control panel => Device manager"]}),"\n",(0,i.jsx)(n.h3,{id:"provisioning-watson-code-assistant",children:"Provisioning Watson Code Assistant"}),"\n",(0,i.jsx)(n.h4,{id:"problem-2",children:(0,i.jsx)(n.strong,{children:"Problem"})}),"\n",(0,i.jsx)(n.p,{children:'The Techzone instance doesn\'t seem to give us the option to provision a dedicated instance with the intent to use "non-regulated customer data" like we get when we provision other techzone instances such as governance.'}),"\n",(0,i.jsx)(n.h4,{id:"solution-2",children:(0,i.jsx)(n.strong,{children:"Solution"})}),"\n",(0,i.jsx)(n.p,{children:"We're still trying to solve this issue"}),"\n",(0,i.jsx)(n.h3,{id:"first-install-didnt-include-the-occurrences-per-file-properly",children:"First install didn't include the Occurrences per file properly"}),"\n",(0,i.jsx)(n.p,{children:"Renate reinstalled and followed the install wizard and it sorted the issue. We're not really sure why it wasn't working."}),"\n",(0,i.jsx)(n.h3,{id:"make-sure-the-refactoring-assistant-is-loading-properly",children:"Make sure the refactoring assistant is loading properly"}),"\n",(0,i.jsx)(n.h4,{id:"problem-3",children:(0,i.jsx)(n.strong,{children:"Problem"})}),"\n",(0,i.jsxs)(n.p,{children:["When we run ",(0,i.jsx)(n.code,{children:"podman logs"})," we're seeing an SSL cert error. We're troubleshooting what is causing that."]}),"\n",(0,i.jsx)(n.h3,{id:"vm-problems",children:"VM Problems"}),"\n",(0,i.jsx)(n.p,{children:"The VM's we were initially trying to install ADDI and Refactoring assistant weren't really communicating effectively. So a first inital test that we recommend is as soon as you have the environment is that you ping from one VM to the other to ensure that you have open communications because everything else hinges on that."}),"\n",(0,i.jsx)(n.h3,{id:"installing-addi",children:"Installing ADDI"}),"\n",(0,i.jsx)(n.p,{children:"As you're doing a custom install of SQL Server Express 2022, in the GUI, choose the custom install option. As you make your way through the install, at the very top there is a default profile option. Also, Toward the very end of the install, you can opt to select both Microsoft AND SQL authentication during the install. That will alleviate some of the manual steps later."}),"\n",(0,i.jsx)(n.h3,{id:"installing-refactoring-assistant",children:"Installing Refactoring Assistant"}),"\n",(0,i.jsxs)(n.p,{children:["The Cookbook and the Documentation site sometimes have discrepancies. For example, The DEX_HOST_PORT problem we ran into is correct in the online documentation but broken in the cookbook.\nWe needed to add ",(0,i.jsx)(n.code,{children:"RA_MOUNT_OPTIONS=:Z"})," to the config.properties file."]}),"\n",(0,i.jsx)(n.p,{children:"On the Windows VM in the dex.yaml file, step 7 of page 12 of the cookbook, we deleted the connectors from the dex.yaml file to better match what was in the documentation."}),"\n",(0,i.jsxs)(n.p,{children:["In step 8, in the eclipse tool, it mentions going into the dashboard to configure. You need to update everything in the GUI. If you're using HTTPS vs HTTP, you need to update the port from ",(0,i.jsx)(n.code,{children:"2181"})," to ",(0,i.jsx)(n.code,{children:"2281"}),". To get there you need to go into ",(0,i.jsx)(n.strong,{children:"Double Click on Environment Settings"})," It looks like its a header but it is it's own menu."]}),"\n",(0,i.jsxs)(n.p,{children:['In the official online Documentation, step 6, it says "Copy the ADDI certificate to the directory ',(0,i.jsx)(n.code,{children:"/etc/pki/ca-trust/source/anchors"})," on the Linux and run the following command ",(0,i.jsx)(n.code,{children:"update-ca-trust"})]}),"\n",(0,i.jsxs)(n.p,{children:["There also is no sanity check in the documentation to make sure everything is working. The default password is ",(0,i.jsx)(n.code,{children:"password"})," when connecting to the refactoring assistant."]})]})}function h(e={}){const{wrapper:n}={...(0,o.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},1151:(e,n,t)=>{t.d(n,{Z:()=>a,a:()=>s});var i=t(7294);const o={},r=i.createContext(o);function s(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);